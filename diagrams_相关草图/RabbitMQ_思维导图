<mxfile host="app.diagrams.net" modified="2022-08-22T11:50:12.031Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36" etag="3fukywXd5NaSNJsKm9u6" version="20.2.5" type="github">
  <diagram id="znSshX0QQh3u8jrE8Ery" name="第 1 页">
    <mxGraphModel dx="3327" dy="2056" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Rn9wRid1taBudjc-zsMv-4" value="&lt;b&gt;1. 异步解耦&lt;br&gt;&lt;/b&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;2. 分布式事务（最终一致性）&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;3. 流量削峰填谷&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="520" y="20" width="300" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-7" value="" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;fontStyle=1;fontFamily=Comic Sans MS;hachureGap=4;fontSize=20;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="510" y="20" width="300" height="90" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;curved=1;sketch=1;" parent="1" source="Rn9wRid1taBudjc-zsMv-1" target="Rn9wRid1taBudjc-zsMv-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="320" y="150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-1" target="Rn9wRid1taBudjc-zsMv-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-54" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Rn9wRid1taBudjc-zsMv-1" target="Rn9wRid1taBudjc-zsMv-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="170" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-58" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-1" target="Rn9wRid1taBudjc-zsMv-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-60" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-1" target="Rn9wRid1taBudjc-zsMv-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-76" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-1" target="Rn9wRid1taBudjc-zsMv-74" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-86" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-1" target="Rn9wRid1taBudjc-zsMv-82" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="300" y="460" />
              <mxPoint x="137" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-1" value="RabbmitMQ" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;sketch=1;fontStyle=1;fontFamily=Comic Sans MS;rounded=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="230" y="170" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-5" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;endFill=1;" parent="1" source="Rn9wRid1taBudjc-zsMv-2" target="Rn9wRid1taBudjc-zsMv-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-2" value="应用场景" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;fontFamily=Comic Sans MS;fontStyle=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="320" y="60" width="106" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-9" value="&lt;h1&gt;RabbitMQ&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;* 实现了“推拉模型”，区别在于: 一个是由客户端循环不间断拉取，一个是由Broker服务端推送到客户端。&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;* 基于AMQP协议，采用Erlang语言，处理高并发场景/Kafak 高吞吐。&lt;/div&gt;&lt;div&gt;* RabbitMQ角色“生产者，消费者，Broker、交换机、队列，消息”。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-70" y="-500" width="1110" height="310" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-12" target="Rn9wRid1taBudjc-zsMv-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-19" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-12" target="Rn9wRid1taBudjc-zsMv-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-20" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-12" target="Rn9wRid1taBudjc-zsMv-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-34" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-12" target="Rn9wRid1taBudjc-zsMv-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-12" value="工作模式/交换机" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=#ffe6cc;fontStyle=1;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="385" y="290" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-52" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-14" target="Rn9wRid1taBudjc-zsMv-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-14" value="direct&lt;br&gt;（直连交换机，完全匹配，默认交换机）" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="680" y="300" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-53" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-15" target="Rn9wRid1taBudjc-zsMv-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-15" value="topic&lt;br&gt;路由模式（模糊匹配，*，#）" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="680" y="410" width="290" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-51" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-16" target="Rn9wRid1taBudjc-zsMv-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-16" value="fanout&lt;br&gt;(扇形交换机)" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="680" y="210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-43" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-22" target="Rn9wRid1taBudjc-zsMv-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-22" value="简单队列模式&lt;br&gt;（采用默认 direct）" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="624" y="520" width="186" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-44" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-23" target="Rn9wRid1taBudjc-zsMv-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-23" value="工作队列模式&lt;br&gt;（采用默认 direct）" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="624" y="630" width="186" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-46" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-24" target="Rn9wRid1taBudjc-zsMv-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-24" value="发布订阅模式&lt;br&gt;(fanout)" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="624" y="740" width="186" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-48" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-25" target="Rn9wRid1taBudjc-zsMv-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-25" value="路由模式(完全匹配)&lt;br&gt;（direct）" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="624" y="840" width="186" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-47" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-26" target="Rn9wRid1taBudjc-zsMv-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-26" value="主题模式(模糊匹配)&lt;br&gt;(topic)" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="624" y="950" width="186" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-37" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-33" target="Rn9wRid1taBudjc-zsMv-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-38" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Rn9wRid1taBudjc-zsMv-33" target="Rn9wRid1taBudjc-zsMv-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-39" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Rn9wRid1taBudjc-zsMv-33" target="Rn9wRid1taBudjc-zsMv-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-40" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-33" target="Rn9wRid1taBudjc-zsMv-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-41" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=16;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-33" target="Rn9wRid1taBudjc-zsMv-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-33" value="工作模式" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="430" y="430" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-42" value="&lt;h1&gt;&lt;br&gt;&lt;/h1&gt;&lt;div&gt;# 采用默认直连交换机（direct）:&lt;/div&gt;&lt;div&gt;* 简单队列模式(点对点模式): 一个消息生产者和消费者以及一个队列。&lt;/div&gt;&lt;div&gt;* 工作队列模式: 一个消息生产者和队列，多个消费者，多个消费者之间是竞争关系消费。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;* 发布订阅模式(广播模式 fanout): 一个消息生产者和一个交换机，多个队列，与交换机绑定的队列都能收到消息。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;* 路由模式(完全匹配模式 routingkey/bindingkey): 交换机和队列之间利用一个 key 进行绑定，由这个 key 判定消息发送到哪个队列。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;* 主题模式(模式匹配模式): 与 direct 交换机类似，区别只是在于 key 是一个模式匹配的模式，* 多个单词，# 单个单词，多个单词之间 “.” 隔开。&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="910" y="530" width="680" height="470" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-49" value="" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;fontStyle=1;fontFamily=Comic Sans MS;hachureGap=4;fontSize=20;fontColor=#000000;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="910" y="585" width="710" height="390" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-67" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-55" target="Rn9wRid1taBudjc-zsMv-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-68" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-55" target="Rn9wRid1taBudjc-zsMv-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-55" value="死信队列/延迟队列/优先级队列" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-210" y="330" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-57" value="消费端消息确认机制&lt;br&gt;（ACK 手动签收和自动签收）" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=#ffe6cc;fontStyle=1;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="-180" y="10" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-62" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-59" target="Rn9wRid1taBudjc-zsMv-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-59" value="生产端消息确认机制&lt;br&gt;（事务、confirm、异步回调确认）" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=#ffe6cc;fontStyle=1;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="-190" y="140" width="330" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-61" value="&lt;h1&gt;&lt;br&gt;&lt;/h1&gt;&lt;div&gt;&amp;nbsp;1. 事务机制（没有友好的判断，生产端没办法百分百确认消息提交成功）。&lt;/div&gt;&lt;div&gt;&amp;nbsp;2. 消息的确认机制 confirm (单条确认/批量确认)，消息到达服务端，由服务端返回确认结果，拿不到详细的消息。&lt;/div&gt;&lt;div&gt;&amp;nbsp;3. 异步回调确认机制。&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;-&amp;nbsp;BasicReturn （消息不可达，必须为直连模式）&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;-&amp;nbsp;basicNacks （消息成功发送到 Broker 触发）&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fontColor=#000000;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-870" y="80" width="558" height="330" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-63" value="" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;fontStyle=1;fontFamily=Comic Sans MS;hachureGap=4;fontSize=20;fontColor=#000000;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-890" y="130" width="588" height="220" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-69" value="延迟队列就是通过死信队列实现的" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontStyle=1" parent="1" source="Rn9wRid1taBudjc-zsMv-64" target="Rn9wRid1taBudjc-zsMv-65" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-270" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-79" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.463;entryY=-0.001;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-64" target="Rn9wRid1taBudjc-zsMv-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-64" value="死信队列" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fontColor=#000000;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-680" y="490" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-81" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.47;entryY=-0.007;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-65" target="Rn9wRid1taBudjc-zsMv-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-65" value="延迟队列" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fontColor=#000000;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-210" y="490" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-70" value="* 死信队列: 配置完，消息不可达、消息过期、消息被拒收，就会进入死信队列。&lt;br&gt;&amp;nbsp; -&amp;nbsp;&quot;x-dead-letter-exchange&quot;,&quot;XDL-Exchange&quot;&lt;br&gt;&amp;nbsp; -&amp;nbsp;&quot;x-dead-letter-routing-key&quot;,&quot;XDL-Routingkey&quot;&lt;br&gt;&amp;nbsp; -&amp;nbsp;&quot;x-message-ttl&quot;,10000&lt;br&gt;&lt;br&gt;* 延迟队列：就是设置消息的过期时间，然后消息进入死信队列，消费死信队列，这就是延迟队列的实现。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fontColor=#000000;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-827" y="650" width="640" height="205" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-74" value="持久化&lt;br&gt;（交换机持久化，消息持久化，消息持久化）" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="40" y="-120" width="450" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-78" value="" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;fontStyle=1;fontFamily=Comic Sans MS;hachureGap=4;fontSize=20;fontColor=#000000;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-847" y="630" width="680" height="240" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-87" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=1;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Comic Sans MS;fontSize=16;fontColor=#000000;endArrow=classicThin;endFill=1;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" parent="1" source="Rn9wRid1taBudjc-zsMv-82" target="Rn9wRid1taBudjc-zsMv-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-82" value="消息的优先级" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;fontStyle=1;fontFamily=Comic Sans MS;hachureGap=4;fontSize=20;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="64" y="500" width="146" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-85" value="* 如果没有发生消息堆积，消息的优先级是不起作用的。&lt;br&gt;&amp;nbsp; &amp;nbsp;-&amp;nbsp;&quot;x-max-priority&quot;, 50&lt;br&gt;&amp;nbsp; &amp;nbsp;- 生产端和消费端都需要设置一下。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;hachureGap=4;fontFamily=Comic Sans MS;fontSize=20;fontColor=#000000;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-20" y="660" width="390" height="140" as="geometry" />
        </mxCell>
        <mxCell id="Rn9wRid1taBudjc-zsMv-89" value="&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;fontStyle=1;fontFamily=Comic Sans MS;hachureGap=4;fontSize=20;fontColor=#000000;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-31" y="650" width="412" height="140" as="geometry" />
        </mxCell>
        <mxCell id="ovBhDQQnQHo0Yc4rqAlS-3" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Comic Sans MS;fontSize=21;endArrow=open;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" edge="1" parent="1" source="ovBhDQQnQHo0Yc4rqAlS-1" target="ovBhDQQnQHo0Yc4rqAlS-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ovBhDQQnQHo0Yc4rqAlS-1" value="SQL" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;sketch=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;fontFamily=Comic Sans MS;fontSize=21;" vertex="1" parent="1">
          <mxGeometry x="-400" y="1580" width="150" height="150" as="geometry" />
        </mxCell>
        <mxCell id="ovBhDQQnQHo0Yc4rqAlS-5" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;sketch=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Comic Sans MS;fontSize=21;endArrow=open;startSize=14;endSize=14;sourcePerimeterSpacing=8;targetPerimeterSpacing=8;" edge="1" parent="1" source="ovBhDQQnQHo0Yc4rqAlS-2" target="ovBhDQQnQHo0Yc4rqAlS-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ovBhDQQnQHo0Yc4rqAlS-2" value="事务隔离级别" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;fontStyle=1;fontFamily=Comic Sans MS;hachureGap=4;fontSize=21;" vertex="1" parent="1">
          <mxGeometry x="-31" y="1560" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ovBhDQQnQHo0Yc4rqAlS-4" value="&amp;nbsp;* 读未提交（Read UnCommittd）：脏读，修改 ，事务未提交就能看见变更数据。&lt;br&gt;&amp;nbsp;* 读提交（Read Committed）：幻读，新增数据&lt;br&gt;&amp;nbsp;* 可重复读（Repeatable Read）:&lt;br&gt;&amp;nbsp;* 可串行化（Serializable）:" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;fontColor=#000000;darkOpacity=0.05;fillColor=#FFF9B2;strokeColor=none;fillStyle=solid;direction=west;gradientDirection=north;gradientColor=#FFF2A1;shadow=1;size=20;pointerEvents=1;hachureGap=4;sketch=1;fontFamily=Comic Sans MS;fontSize=21;align=left;" vertex="1" parent="1">
          <mxGeometry x="286" y="1500" width="714" height="160" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
